
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>verifiable-credential Â· UNiD Documentations</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="description">
        <meta name="generator" content="GitBook 3.2.3">
        
        <meta name="identifier" content="null" scheme="ISBN">
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="did-operation.html" />
    
    
    <link rel="prev" href="did-auth.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://github.com/getunid" target="_blank" class="custom-link">UNiD</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../unid-platform/">
            
                <a href="../unid-platform/">
            
                    
                    UNiD Platform
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../unid-platform/unid-sdk.html">
            
                <a href="../unid-platform/unid-sdk.html">
            
                    
                    UNiD SDKs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../unid-platform/unid-driver.html">
            
                <a href="../unid-platform/unid-driver.html">
            
                    
                    UNiD Drivers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../unid-platform/unid-core.html">
            
                <a href="../unid-platform/unid-core.html">
            
                    
                    UNiD Core
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../mobile-wallet/">
            
                <a href="../mobile-wallet/">
            
                    
                    Mobile Wallet
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../mobile-wallet/did-auth.html">
            
                <a href="../mobile-wallet/did-auth.html">
            
                    
                    did-auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../mobile-wallet/verifiable-credential.html">
            
                <a href="../mobile-wallet/verifiable-credential.html">
            
                    
                    verifiable-credential
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../mobile-wallet/did-operation.html">
            
                <a href="../mobile-wallet/did-operation.html">
            
                    
                    did-operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Server Wallet
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="did-auth.html">
            
                <a href="did-auth.html">
            
                    
                    did-auth
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.2" data-path="verifiable-credential.html">
            
                <a href="verifiable-credential.html">
            
                    
                    verifiable-credential
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="did-operation.html">
            
                <a href="did-operation.html">
            
                    
                    did-operation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../schemas/">
            
                <a href="../schemas/">
            
                    
                    Credential Schemas
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../schemas/email.html">
            
                <a href="../schemas/email.html">
            
                    
                    email
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../schemas/gender.html">
            
                <a href="../schemas/gender.html">
            
                    
                    gender
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../schemas/address.html">
            
                <a href="../schemas/address.html">
            
                    
                    address
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../schemas/alumniof.html">
            
                <a href="../schemas/alumniof.html">
            
                    
                    alumniOf
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../schemas/qualification.html">
            
                <a href="../schemas/qualification.html">
            
                    
                    qualification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../schemas/phone.html">
            
                <a href="../schemas/phone.html">
            
                    
                    phone
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../schemas/birthdate.html">
            
                <a href="../schemas/birthdate.html">
            
                    
                    birthDate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../schemas/contactpoint.html">
            
                <a href="../schemas/contactpoint.html">
            
                    
                    contactPoint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../schemas/name.html">
            
                <a href="../schemas/name.html">
            
                    
                    name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >verifiable-credential</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="verifiable-credential">verifiable-credential</h1>
<p>On this page, we will demonstrate how to issue and verify a verifiable credential in a JSON-LD format adhering to the <a href="https://www.w3.org/TR/vc-data-model/" target="_blank">W3C VC Data Model</a>.</p>
<h2 id="vc-lifecycle">VC Lifecycle</h2>
<p>This section provides a concrete set of simple but complete lifecycle examples of the data model expressed in one of the concrete syntaxes supported by this specification. The lifecycle of credentials and presentations in the Verifiable Credentials Ecosystem often take a common path:</p>
<ol>
<li>Issuance of one or more verifiable credentials.</li>
<li>Storage of verifiable credentials in a secure data storage (SDS).</li>
<li>Composition of verifiable credentials into a verifiable presentation for verifiers.</li>
<li>Verification of the verifiable presentation by the verifier.</li>
</ol>
<p>In UNiD, there are two main methods to submit VP to a wallet holder. The first one is to submit the VP in response to a request from the holder. The second one is to storage the VP in SDS and grant access to the VP to the holder.</p>
<h2 id="create-new-vc">Create New VC</h2>
<p>Here, we introduce how to create VC. When you create and issue a VC, you need to explicitly specify the credential subject&apos;s DID. As a simple example, let&apos;s create an <a href="https://github.com/getunid/unid-docs/tree/8515a1dcda076b9bea8d6e6e6b7eed90e22ae0d3/schemas/address/README.md" target="_blank">AddressCredentialV1</a> through the Nodejs SDK.</p>
<p><strong>DID.createCredential()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span>{
        <span class="hljs-comment">// To get a issuer&apos;s DID</span>
        <span class="hljs-keyword">const</span> DID = await UNiD.loadDid({
            did: <span class="hljs-string">&quot;did:unid:test:EiDHnta3sppFajkzGqYm3jIe_lisi7sIq7ZqIxdzaad7fg&quot;</span>
        })
        <span class="hljs-comment">// To get a credential subject&apos;s DID</span>
        <span class="hljs-keyword">const</span> SubjectDid = await UNiD.loadDid({
            did: <span class="hljs-string">&quot;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&quot;</span>
        })

        <span class="hljs-comment">// To create AddressCredentialV1</span>
        <span class="hljs-keyword">const</span> AddressCredentialV1 = DID.createCredential(
            <span class="hljs-keyword">new</span> AddressCredentialV1({
                <span class="hljs-keyword">type</span>: [ <span class="hljs-string">&apos;VerifiableCredential&apos;</span>, <span class="hljs-string">&apos;AddressCredentialV1&apos;</span> ],
                credentialSubject: {
                    <span class="hljs-string">&apos;@id&apos;</span>: SubjectDid.getIdentifier(),
                    <span class="hljs-string">&apos;@type&apos;</span>: <span class="hljs-string">&quot;AddressPerson&quot;</span>,
                    address: {
                        postalCode: <span class="hljs-string">&quot;1500044&quot;</span>,
                        addressCountry: <span class="hljs-string">&quot;JP&quot;</span>,
                        addressLocality: <span class="hljs-string">&quot;Tokyo&quot;</span>,
                        addressRegion: <span class="hljs-string">&quot;Shibuya-ku&quot;</span>,
                        streetAddress: <span class="hljs-string">&quot;5-5, Marumaya-cho&quot;</span>
                    }
                }
            }, {
                issuanceDate: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
                expirationDate: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
            })
        )
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete creating a credential:&quot;</span>, <span class="hljs-built_in">JSON</span>.stringfy(AddressCredentialV1, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>
<p>In UNiD network, we ensure interoperability by referring to the VC data schema defined <a href="../schemas">here</a>. If you want to generate a new type of VC schema that is not in the UNiD VC schema list, you can request it. For more information, see <a href="https://github.com/getunid/unid-docs/tree/8515a1dcda076b9bea8d6e6e6b7eed90e22ae0d3/tutorial/3-howtorequestvcschema/README.md" target="_blank">Request VC schema</a>.</p>
<p>Great! Now that you&apos;ve completed to create a verifiable credential with JSON-LD data format. Next is to storage the credential to the UNiD SDS (Secure Data Storage).</p>
<h2 id="storage-vc-in-sds">Storage VC in SDS</h2>
<p>The application server can securely access authorized SDS endpoints. The VCs are always encrypted and stored in the SDS in a privacy-preserving manner.</p>
<p><strong>DID.postCredential()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span>{
        <span class="hljs-keyword">const</span> DID = await UNiD.loadDid({
            did: <span class="hljs-string">&quot;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&quot;</span>
        })
        <span class="hljs-keyword">const</span> result = await DID.postCredential(AddressCredentialV1)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete storing the credential to SDS:&quot;</span>, result)
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>
<p>UNiD SDS validate every requests to see if the wallet is authorized to access the SDS and if the request has been tampered with.</p>
<p>Great! Now that you&apos;ve completed to storage a VC to SDS. Next is to get selectively credentials stored in SDS and create a verifiable presentation.</p>
<h2 id="composition-of-vc-into-vp">Composition of VC into VP</h2>
<p>The application server can fetch the newest record using <code>type</code>, <code>credential_subject_did</code>, <code>issuer_did</code>, and <code>issuance_date</code> of the stored VC.</p>
<p><strong>DID.getCredential()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> DID = await UNiD.loadDid({
            did: <span class="hljs-string">&quot;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&quot;</span>
        })
        <span class="hljs-keyword">const</span> credential = await DID.getCredential({
            <span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;AddressCredentialV1&quot;</span>,
            issuer: <span class="hljs-string">&quot;did:unid:test:issuer_12345678#keys-1&quot;</span>,
            issuance_date: {
                begin: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">&apos;2020-01-01&apos;</span>),
                end: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">&apos;2020-12-31&apos;</span>)
            }
        })
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete getting the latest credential from SDS:&quot;</span>, credential)
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>
<p>To get all applicable credentials with options of DID.getCredentials:</p>
<p><strong>DID.getCredentials()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> DID = await UNiD.loadDid({
            did: <span class="hljs-string">&quot;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&quot;</span>
        })
        <span class="hljs-keyword">const</span> credentials = DID.getCredentials({
            <span class="hljs-keyword">type</span>: <span class="hljs-string">&quot;AddressCredentialV1&quot;</span>,
            credentialSubjectDid: <span class="hljs-string">&quot;did:unid:test:holder_123456789&quot;</span>,
            issuer: <span class="hljs-string">&quot;did:unid:test:issuer_123456789&quot;</span>,
            issuance_date: {
                begin: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">&quot;2020-01-01&quot;</span>),
                end: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-string">&quot;2020-12-31&quot;</span>)
            },
            limit: <span class="hljs-number">25</span>,
            page: <span class="hljs-number">1</span>
        })
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete getting credentials from SDS:&quot;</span>, credentials)
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>
<p>After getting credentials, they will be packaged in verifiable presentation with <code>VerifiablePresentation</code> type and the value of the proof property.</p>
<p><strong>DID.createPresentation()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> DID = await UNiD.loadDid({
            did: <span class="hljs-string">&quot;did:unid:test:EiCsnBO7XrB9hL96xvQ2R846j_Ebuyg3HO5o4BOSoU7ffg&quot;</span>
        })
        <span class="hljs-keyword">const</span> presentation = await DID.createPresentation(credentials)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete creating a presentation:&quot;</span>, presentation)
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>
<h2 id="verify-vc-from-holder">Verify VC from Holder</h2>
<p>The application server verifies the digital signature of the VC from a holder. </p>
<p><strong>UNiD.validatePresentation()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = await UNiD.validatePresentation(_presentation)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete validating a presentation:&quot;</span>, result)
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>
<p><strong>UNiD.validateCredential()</strong></p>
<pre><code class="lang-typescript"><span class="hljs-keyword">import</span> { UNiD } from <span class="hljs-string">&quot;@unid/nodejs-sdk&quot;</span>

(async () =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = await UNiD.validateCredential(_credential)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Complete validating a credential:&quot;</span>, <span class="hljs-built_in">JSON</span>.stringfy(result, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&apos;ERROR:&apos;</span>, err)
    }
})()
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="did-auth.html" class="navigation navigation-prev " aria-label="Previous page: did-auth">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="did-operation.html" class="navigation navigation-next " aria-label="Next page: did-operation">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"verifiable-credential","description":"description","level":"1.4.2","depth":2,"next":{"title":"did-operation","level":"1.4.3","depth":2,"path":"server/did-operation.md","ref":"server/did-operation.md","articles":[]},"previous":{"title":"did-auth","level":"1.4.1","depth":2,"path":"server/did-auth.md","ref":"server/did-auth.md","articles":[]},"dir":"ltr"},"config":{"plugins":["katex"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"fontSettings":{"theme":"sepia","family":"serif","size":1},"katex":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":false},"structure":{"langs":"LANGS.md","readme":"Introduction.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"null","variables":{},"title":"UNiD Documentations","links":{"sidebar":{"UNiD":"https://github.com/getunid"},"sharing":{"google":true,"facebook":true,"twitter":true,"all":true}},"gitbook":"*","description":null,"extension":null},"file":{"path":"server/verifiable-credential.md","mtime":"2021-01-02T22:23:27.185Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-02T22:32:58.685Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

